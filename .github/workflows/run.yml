name: Run ttq CLI

on:
  schedule:
    - cron: '56 12 * * 1-5'
    - cron: '58 14 * * 1-5'
    - cron: '57 13 * * 1-5'
    - cron: '06 20 * * 1-5'
  workflow_dispatch:

jobs:
  run-ttq:
    runs-on: ubuntu-latest

    steps:
      - name: Installs ttq-cli
        run: |
          curl -fsSL https://raw.githubusercontent.com/Vavarine/tiquetaque-cli/main/install.sh | bash

      - name: Runs ttq l
        run: |
          ttq l --email "${{ secrets.TTQ_EMAIL }}" --code "${{ secrets.TTQ_CODE }}"

      - name: Runs ttq p
        run: |
          ttq p